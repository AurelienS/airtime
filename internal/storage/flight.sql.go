// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.25.0
// source: flight.sql

package storage

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
	"github.com/jackc/pgx/v5/pgtype"
)

const getFlights = `-- name: GetFlights :many
SELECT
  id, date, takeoff_location, igc_file_path, user_id, flight_statistics_id
FROM flights
WHERE
  user_id = $1
`

func (q *Queries) GetFlights(ctx context.Context, userID int32) ([]Flight, error) {
	rows, err := q.db.Query(ctx, getFlights, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Flight
	for rows.Next() {
		var i Flight
		if err := rows.Scan(
			&i.ID,
			&i.Date,
			&i.TakeoffLocation,
			&i.IgcFilePath,
			&i.UserID,
			&i.FlightStatisticsID,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const insertFlight = `-- name: InsertFlight :execresult
INSERT INTO flights (
    DATE,
    takeoff_location,
    igc_file_path,
    user_id,
    flight_statistics_id
  )
VALUES
  (
    $1,
    $2,
    $3,
    $4,
    $5
  ) RETURNING id
`

type InsertFlightParams struct {
	Date               pgtype.Timestamptz
	TakeoffLocation    string
	IgcFilePath        string
	UserID             int32
	FlightStatisticsID int32
}

func (q *Queries) InsertFlight(ctx context.Context, arg InsertFlightParams) (pgconn.CommandTag, error) {
	return q.db.Exec(ctx, insertFlight,
		arg.Date,
		arg.TakeoffLocation,
		arg.IgcFilePath,
		arg.UserID,
		arg.FlightStatisticsID,
	)
}
